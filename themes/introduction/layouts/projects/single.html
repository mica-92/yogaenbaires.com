{{ define "title" }}
{{ with .Site.GetPage "/projects" }}
<div class="responsive-title-imagedoble">
    <a href="{{ "/yogaenbaires/projects" | relURL }}">
        {{ partial "images/paradas" }}
    </a>
</div>
{{ end }}
{{ end }}

{{ define "main" }}
<div class="container">
    <!-- Construccion del titulo basado en los parametros de id+title -->
    <h2 class="title is-1 top-pad strong-post-title">
        #{{ .Params.id | markdownify }} - {{ .Params.title | markdownify }}
    </h2>

    {{ partial "post-taxonomy.html" . }}

    <hr>
</div>


<!-- Begin blog post content -->
<div class="container markdown">
    {{ partial "single-map.html" . }}

    <hr>

    <div class="connect-section">
        <h1>{{ .Params.title | markdownify }}</h1>

        <p>{{ .Content }}</p>

        <div class="contact-grid">
            <!-- Left Column - Contact Info -->
            <div class="contact-info">
                <div class="connect-item">
                    <h2>Contacto & Redes:</h2>
                </div>
        
                <div class="connect-item">
                    <h3>- Dirección:</h3><br>
                    <div class="address-container">
                        <a href="https://www.google.com/maps/place/?q=place_id:{{ .Params.direccion.maps | replaceRE `.*!3d([^!]+).*` `$1` }}" 
                           target="_blank" 
                           class="address-link">
                            {{ .Params.direccion.texto | markdownify }}
                        </a>
                    </div>
                </div>

                {{ if .Params.instagram }}
                <div class="connect-item">
                    <h3>- Instagram:</h3><br>
                    <a class="address-link" href="{{ .Params.instagram }}" target="_blank" class="connect-link">
                        {{ replace .Params.instagram "https://www.instagram.com/" "@" }}
                    </a>
                </div>
                {{ end }}
                
                {{ if .Params.website }}
                <div class="connect-item">
                    <h3>- Website:</h3><br>
                    <a href="{{ if hasPrefix .Params.website "http" }}{{ .Params.website }}{{ else }}https://{{ .Params.website }}{{ end }}" 
                       target="_blank" 
                       rel="noopener noreferrer"
                       class="address-link">
                       {{ replaceRE `^(https?:\/\/)?(www\.)?([^\/]+)(\/.*)?$` `$3` .Params.website }}
                    </a>
                </div>
                {{ end }}
            
            </div>
        
            <!-- Right Column - Instagram -->
            {{ if .Params.instagram }}
            <div class="instagram-column">

                
                {{ if .Params.instagram }}
                <div class="instagram-embed-wrapper">
                    <div class="instagram-embed-container">
                        <blockquote class="instagram-media" data-instgrm-permalink="{{ .Params.instagram }}" data-instgrm-version="14">
                            <div class="instagram-placeholder">
                                <a href="{{ .Params.instagram }}" target="_blank">View Instagram Post</a>
                            </div>
                        </blockquote>
                        <script async src="//www.instagram.com/embed.js"></script>
                    </div>
                </div>
                {{ end }}
            </div>
            {{ end }}
        </div>
        
        <div class="connect-item ">
            <h2>Horarios:</h2>
            El estudio cuenta con <b>{{ .Params.salones }}</b> salon con capacidad para <b>{{ .Params.capacidad }}</b> alumnos.
            {{.Params.reservas }}
  
        {{ partial "schedule.html" . }}
    

    <div class="photos-reviews-section">
        <h2>Fotos & Opiniones</h2>
        
        <div class="photos-reviews-grid">
            <!-- Left Column - Photo Carousel -->
            <div class="photo-carousel-wrapper {{ if not (or .Params.review1 .Params.review2) }}centered{{ end }}">
                <div class="project-slider-container" id="project-carousel">
                    <div class="slider-controls">
                        <button class="slider-arrow left-arrow" onclick="moveSlide(-1, 'carousel')">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        
                        <div class="media-slider">
                            {{ $mediaResources := .Resources.ByType "image" }}
                            {{ range $index, $media := sort $mediaResources "Params.weight" }}
                            <div class="media-slide {{ if eq $index 0 }}active{{ end }}">
                                {{ $image := $media.Fit "800x1000" }}
                                <img src="{{ $image.Permalink }}" class="slider-image" alt="{{ $image.Name }}">
                            </div>
                            {{ end }}
                        </div>
                        
                        <button class="slider-arrow right-arrow" onclick="moveSlide(1, 'carousel')">
                            <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                    
                    <div class="slider-dots">
                        {{ range $i := seq (len $mediaResources) }}
                        <span class="dot {{ if eq $i 0 }}active{{ end }}" onclick="goToSlide({{ sub $i 1 }}, 'carousel')"></span>
                        {{ end }}
                    </div>
                </div>
            </div>
            
        <!-- Right Column - Reviews (only if reviews exist) -->
        {{ if or .Params.review1 .Params.review2 }}
        <div class="reviews-column">
            <div class="review-cards-container">
                {{ if .Params.review1 }}
                <div class="review-card style-vinyasa">
                    <div class="review-content">
                        {{ .Params.review1 | markdownify }}
                    </div>
                    {{ if .Params.review1_author }}
                    <div class="review-author">
                        — {{ .Params.review1_author }}
                    </div>
                    {{ end }}
                </div>
                {{ end }}
                
                {{ if .Params.review2 }}
                <div class="review-card style-vinyasa">
                    <div class="review-content">
                        {{ .Params.review2 | markdownify }}
                    </div>
                    {{ if .Params.review2_author }}
                    <div class="review-author">
                        — {{ .Params.review2_author }}
                    </div>
                    {{ end }}
                </div>
                {{ end }}
            </div>
        </div>
        {{ end }}</div>

            
    <hr>

    <!-- Fecha de Visita  -->
    <div class="post-data"><strong>Fecha de visita:</strong>
        {{ if .Params.date }}{{ .Date.Format (.Site.Params.dateFormat | default ":date_medium") }}{{ end }}
        {{ if .Site.Params.showReadingTime | default true }}
        {{ if .Params.date }} {{ end }}<br>
        <p style="font-size: 0.8rem"><i>Disclaimer: La información recolectada se encuentra actualizada al momento de la visita. Los horarios pueden variar, por las dudas siempre consulta antes de ir.</i></p>

        {{ end }}
    </div><hr>
    
</div>
<!-- End blog post content -->
{{ partial "comments.html" . }}

<style>
    :root {
        --red: #CD5C5C; /* Define your color variable */
        --gray: #6c6464; /* Define your color variable */
      }

    .connect-section p {
        font-size: 1.2rem;
        color: var(--gray);
        margin-bottom: 1rem;
        font-weight: 500;
    }  
    .connect-section h1 {
        font-size: 2rem;
        color: var(--red);
        margin-bottom: 1rem;
        font-weight: 500;
    }

    .connect-section h2 {
        font-size: 1.4rem;
        color: var(--red);
        margin-bottom: 1rem;
        margin-top: 2rem;
        font-weight: 500;
    }
    
    .connect-section h3 {
        font-size: 1.2rem !important;
        color: var(--gray);
        margin-bottom: 0.5rem;
        font-weight: 500;
        display: inline; /* Since it's in a line with strong */
    }

    .connect-item.extra-margintop h2 {
        margin-top: 3.3rem !important;
    }
    
    .address-link {
        display: inline-block;
        color: var(--gray) !important;
        text-decoration: none;
        font-weight: 500;
        margin-bottom: 0.5rem;
        padding: 0.3rem 0.5rem;
        border-radius: 4px;
        transition: all 0.3s ease;
    }
    
    .address-link:hover {
        color: var(--red) !important;
    }

    /* Grid Layout */
        .contact-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            align-items: start;
        }
    
        /* Make columns equal height */
        .contact-info, .instagram-column {
            display: flex;
            flex-direction: column;
            height: 100%;
        }
    
        /* Instagram embed sizing */
        .instagram-embed-wrapper {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }
    
        .instagram-embed-container {
            flex-grow: 1;
            min-height: 300px; /* Minimum height */
        }
    
        .instagram-media {
            height: 100% !important;
            min-height: 100%;
        }
    
        /* Responsive adjustment */
        @media (max-width: 768px) {
            .contact-grid {
                grid-template-columns: 1fr;
            }
        }
    

    /* Photos & Reviews Section */
.photos-reviews-section {
    margin: 3rem 0;
    padding: 0 1rem;
}

.photos-reviews-section h2 {
    text-align: center;
    margin-bottom: 2rem;
    color: #CD5C5C;
    font-size: 1.8rem;
}

.photos-reviews-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 2rem;
    max-width: 1200px;
    margin: 0 auto;
}

@media (min-width: 768px) {
    .photos-reviews-grid {
        grid-template-columns: {{ if or .Params.review1 .Params.review2 }}1fr 1fr{{ else }}1fr{{ end }};
    }
}

/* PROJECT SLIDER STYLES WITH COMPLETE HOVER EFFECTS */
.projects-section {
    padding: 1rem 0;
}

.project-slider-wrapper {
    width: 80%;
    margin: 0 auto;
    transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    border-radius: 6px;
    overflow: hidden;
    background: white;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
}

.project-slider-wrapper.hover-effect:hover {
    transform: translateY(-5px) scale(1.02);
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
}

.project-slider-container {
    position: relative;
    margin-bottom: 0;
}

.slider-controls {
    position: relative;
    width: 100%;
    margin: 0 auto;
}

.media-slider {
    position: relative;
    width: 100%;
    overflow: hidden;
}

.media-slide {
    display: none;
    width: 100%;
}

.media-slide.active {
    display: block;
}

.slider-image {
    width: 100%;
    height: auto;
    aspect-ratio: 4/5;
    object-fit: cover;
    filter: saturate(0.95) brightness(0.98);
    transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

.hover-effect:hover .slider-image {
    transform: scale(1.06);
    filter: saturate(1.05) brightness(1.02) drop-shadow(0 2px 6px rgba(0,0,0,0.1));
}

/* ARROW STYLES */
.slider-arrow {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    background: rgba(0,0,0,0.5);
    color: white;
    border: none;
    width: 30px;
    height: 30px;
    border-radius: 50%;
    font-size: 1rem;
    cursor: pointer;
    z-index: 10;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
}

.slider-arrow:hover {
    background: rgba(0,0,0,0.7);
    transform: translateY(-50%) scale(1.1);
}

.left-arrow {
    left: 10px;
}

.right-arrow {
    right: 10px;
}

/* DOT NAVIGATION */
.slider-dots {
    text-align: center;
    margin: 10px 0;
    padding: 0 20px;
}

.dot {
    display: inline-block;
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: #ccc;
    margin: 0 4px;
    cursor: pointer;
    transition: all 0.3s ease;
}

.dot.active {
    background: #333;
}

.dot:hover {
    transform: scale(1.2);
}

/* PROJECT INFO - WITH HOVER EFFECTS */
.project-info {
    text-align: center !important;
    padding: 1rem;
    transition: all 0.3s ease;
    background: white;
}

.project-info h2 {
    font-size: 1.2rem;
    color: #CD5C5C;
    margin-bottom: 0.5rem;
    transition: all 0.3s ease;
}

.hover-effect:hover .project-info h2 {
    color: #6c6464;
    font-weight: 700;
}

.hover-effect:hover .project-info {
    background-color: white;
}

/* RESPONSIVE ADJUSTMENTS */
@media (max-width: 768px) {
    .project-slider-wrapper {
        width: 90%;
    }
    
    .slider-arrow {
        width: 25px;
        height: 25px;
    }
}

@media (max-width: 480px) {
    .project-slider-wrapper {
        width: 95%;
    }
    
    .column.is-half {
        width: 100%;
    }
    
    .project-slider-wrapper.hover-effect:hover {
        transform: none;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
}




/* Review Cards Container */
.review-cards-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
    justify-content: center;
    height: 100%;
    padding: 1rem;
}

/* Vinyasa Style Cards */
.review-card.style-vinyasa {
    background-color: #fce4ec;
    color: #c2185b;
    border: 1px solid #f8bbd0;
    border-radius: 12px;
    padding: 1.5rem;
    transition: all 0.3s ease;
    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
}

.review-card.style-vinyasa:hover {
    background-color: #fce4ec;
    transform: translateY(-3px);
    box-shadow: 0 4px 12px rgba(0,0,0,0.12);
}

.review-card.style-vinyasa .review-content {
    font-style: italic;
    line-height: 1.6;
    margin-bottom: 0.5rem;
}

.review-card.style-vinyasa .review-author {
    text-align: right;
    font-weight: 600;
    color: #ad1457;
}

/* Center alignment for the column */
.reviews-column {
    display: flex;
    align-items: center;
    justify-content: center;
}

/* Responsive adjustments */
@media (max-width: 768px) {
    .review-card.style-vinyasa {
        padding: 1.2rem;
    }
    
    .review-cards-container {
        padding: 0.5rem;
    }
}
</style>

<script>
// Global variable to track current slides
const projectSlides = {};

document.addEventListener('DOMContentLoaded', function() {
    // Initialize all sliders
    document.querySelectorAll('.project-slider-container').forEach(container => {
        const id = container.id.split('-')[1];
        projectSlides[id] = 0;
    });
});

function moveSlide(direction, projectId) {
    const container = document.getElementById(`project-${projectId}`);
    if (!container) return;
    
    const slides = container.querySelectorAll('.media-slide');
    const dots = container.querySelectorAll('.dot');
    
    // Hide current slide
    slides[projectSlides[projectId]]?.classList.remove('active');
    dots[projectSlides[projectId]]?.classList.remove('active');
    
    // Calculate new index
    projectSlides[projectId] += direction;
    
    // Handle wrap-around
    if (projectSlides[projectId] >= slides.length) {
        projectSlides[projectId] = 0;
    } else if (projectSlides[projectId] < 0) {
        projectSlides[projectId] = slides.length - 1;
    }
    
    // Show new slide
    slides[projectSlides[projectId]]?.classList.add('active');
    dots[projectSlides[projectId]]?.classList.add('active');
}

function goToSlide(index, projectId) {
    const container = document.getElementById(`project-${projectId}`);
    if (!container) return;
    
    const slides = container.querySelectorAll('.media-slide');
    const dots = container.querySelectorAll('.dot');
    
    // Hide current slide
    slides[projectSlides[projectId]]?.classList.remove('active');
    dots[projectSlides[projectId]]?.classList.remove('active');
    
    // Set new index
    projectSlides[projectId] = index;
    
    // Show new slide
    slides[projectSlides[projectId]]?.classList.add('active');
    dots[projectSlides[projectId]]?.classList.add('active');
}
</script>
{{ end }}