<div class="nav-bar">
    <div class="nav-content">
        <div class="left-items">
            <div class="menu-toggle" id="menuToggle">
                <img src="/images/IG-prof.png" alt="Menu" class="burger-icon" width="30" height="30">
            </div>
            
            <a href="/" class="logo-link">
                <img src="/images/logoderecho.png" alt="Logo" class="right-logo">
            </a>
            
            <div class="slogan">
                <i>el viaje de una <b>yogini</b> por los <b>cien</b> barrios porte√±os</i>
            </div>
        </div>

        <div class="social-icons">
            <a href="https://www.instagram.com/yogaenbaires" target="_blank" class="social-icon"><i class="fa-brands fa-instagram"></i></a>
            <a href="https://www.tiktok.com/@yogaenbaires" target="_blank" class="social-icon"><i class="fa-brands fa-tiktok"></i></a>
            <a href="mailto:mmicaninni92@email.com" class="social-icon"><i class="fa-solid fa-envelope"></i></a>
        </div>
    </div>

    <div class="fullscreen-menu" id="fullscreenMenu">
        <div class="menu-content">
            <div class="mobile-header">
                <div class="menu-close" id="menuClose">
                    <i class="fa-solid fa-xmark"></i>
                </div>
            </div>

            {{ $estudios := where .Site.RegularPages "Section" "estudios" }}
            <script>
              window.estudiosData = [
                {{ range $estudios }}
                {
                  title: {{ .Title | jsonify }},
                  permalink: {{ .Permalink | jsonify }},
                  {{ with .Params.barrio }}barrio: {{ . | jsonify }},{{ end }}
                  {{ with .Params.estilo }}estilo: {{ . | jsonify }},{{ end }}
                  id: {{ .Params.id | default .File.BaseFileName | jsonify }},
                  content: {{ .Plain | jsonify }}
                },
                {{ end }}
              ];
            </script>

            <div class="search-container">
                <i id="searchIcon" class="fa-solid fa-magnifying-glass"></i>
                <input type="text" id="postSearch" placeholder="Buscar por Nombre, Categoria o #ID...">
                <div id="searchResults"></div>
            </div>

            <nav class="menu-links">
                <a href="/">home: <i>el sendero del yogui</i></a>
                <a href="/blog/sobre-mi/">sobre mi & <i>yogaenbaires</i></a>
                <a href="/blog/">el semillero</a>
                
                <div class="taxonomy-section">
                    <h3 class="categorias-title">Barrios</h3>
                    <div class="taxonomy-list">
                        {{ range $name, $taxonomy := .Site.Taxonomies.barrio }}
                            <a href="/barrio/{{ $name | urlize }}" class="taxonomy-item">{{ $name | title }}</a>
                        {{ end }}
                    </div>
                    
                    <h3 class="categorias-title">Estilos</h3>
                    <div class="taxonomy-list">
                        {{ range $name, $taxonomy := .Site.Taxonomies.estilo }}
                            <a href="/estilo/{{ $name | urlize }}" class="taxonomy-item">{{ $name | title }}</a>
                        {{ end }}
                    </div>
                    
                    <h3 class="categorias-title">Intensidad</h3>
                    <div class="taxonomy-list">
                        {{ range $name, $taxonomy := .Site.Taxonomies.intensidad }}
                            <a href="/intensidad/{{ $name | urlize }}" class="taxonomy-item">{{ $name | title }}</a>
                        {{ end }}
                    </div>
                </div>
            </nav>
        </div>
    </div>
</div>

<style>
.a:hover {
    text-decoration: none !important;
}


.categorias-title {
    font-size: 1.6rem !important;
    font-weight: 600 !important;
    text-align: left !important;
    color: #555;
}
/* Logo and icon container adjustments */
.menu-toggle {
    height: 30px; /* Fixed height to match logo */
    width: 30px; /* Fixed width to maintain square ratio */
}


.burger-icon {
    width: 30px !important;
    height: 30px !important;
    transition: none !important; /* Disable transition during initial load */
}

/* Add this to your existing CSS */
.menu-toggle {
    overflow: hidden; /* Contain any initial image flash */
}

/* Logo and icon image styles */
.right-logo, 
.burger-icon, 
.burger-icon-hover {
    height: 100%;
    width: auto; /* Maintain aspect ratio */
    max-height: 30px; /* Same as container */
    object-fit: contain; /* Ensure image isn't stretched */
}

/* Mobile-specific adjustments */
@media (max-width: 768px) {
    .logo-link {
        height: 25px; /* Slightly smaller on mobile */
    }
    
    .right-logo {
        max-height: 25px;
    }
    
    .menu-toggle {
        height: 25px;
        width: 25px;
    }
    
    .burger-icon, 
    .burger-icon-hover {
        max-height: 25px;
    }
}

/* Prevent any accidental distortion */
img {
    max-width: 100%;
    height: auto;
    object-fit: contain;
}


/* Modified styles for logo and link */
.logo-link {
    display: flex;
    align-items: center;
    height: 30px; /* Match your logo height */
    margin-right: 1rem;
}

.right-logo {
    height: 100%;
    width: auto;
    max-height: 30px;
}


/* Base Styles */
.nav-bar {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 60px;
    background: white;
    z-index: 1000;
    display: flex;
    align-items: center;
    padding: 0 1rem;
    box-sizing: border-box;
}

.nav-content {
    width: 100%;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.left-items {
    display: flex;
    align-items: center;
}

.slogan {
    padding-top: 0.9rem;
    margin-left: 1rem;
    font-size: 18px;
    color: #2c2900;
}

  /* Hover effects for both */
  .fa, .fab, .fas {
    font-size: 36px !important;

  }

.social-icons {
    display: flex;
}

.social-icon {
    margin-left: 1rem !important;
    margin-right: 1rem !important;
    font-size: 30px;
    color: #6c6464;
    transition: all 0.3s ease;
}

.social-icon:hover {
    color: #CD5C5C;
    transform: scale(1.1);
}

.menu-toggle {
    cursor: pointer;
    height: 40px;
    width: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-right: 1rem;
    position: relative;
}

.menu-toggle img {
    height: 30px;
    width: auto;
    transition: all 0.3s ease;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
}

.burger-icon-hover {
    opacity: 0;
}

.menu-toggle:hover .burger-icon {
    opacity: 0;
}

.menu-toggle:hover .burger-icon-hover {
    opacity: 1;
}

.right-logo {
    height: 30px;
    width: auto;
    margin-right: 1rem;
}

/* Fullscreen Menu */
.fullscreen-menu {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100vh;
    background: white;
    z-index: 999;
    display: none;
    flex-direction: column;
    overflow: hidden;
}

.menu-content {
    width: 100%;
    max-width: 800px;
    margin: 0 auto;
    padding: 1.5rem;
    height: 100vh;
    overflow-y: auto;
    scrollbar-width: none;
    -ms-overflow-style: none;
}

.menu-content::-webkit-scrollbar {
    display: none;
}

.mobile-header {
    display: flex;
    justify-content: flex-end;
    padding-bottom: 1rem;
    margin-bottom: 1rem;
}

.menu-close {
    font-size: 1.5rem;
    color: #333;
    cursor: pointer;
    transition: all 0.3s ease;
}

.menu-close:hover {
    color: #CD5C5C;
    transform: scale(1.1);
}

.search-container {
    margin: 1.5rem 0;
    position: relative;
}

.search-container i {
    position: absolute;
    left: 1rem;
    top: 0.75rem;
    color: #999;
    font-weight: bold;
    transition: color 0.3s ease;
}

.search-container input:focus ~ i {
    color: #CD5C5C; /* Icon turns red when input is focused */
}

.search-container input {
    width: 100%;
    padding: 0.75rem 0.75rem 0.75rem 2.5rem;
    border: none;
    border-bottom: 1px solid #ddd; /* Default thin gray bottom border */
    font-weight: 500;
    background: transparent;
    font-size: 1rem;
    outline: none; /* Remove default focus outline */
    box-shadow: none; /* Remove any box shadow */
    transition: border-bottom 0.3s ease; /* Smooth transition */
}

.search-container input:focus {
    border-bottom: 2px solid #CD5C5C; /* Thicker red bottom border when focused */
    border-radius: 0; /* Ensure no rounded corners */
}

.search-container input:focus-visible {
    outline: none; /* Remove outline in modern browsers */
}

#searchResults {
    margin-top: 1rem;
}

.menu-links {
    display: flex;
    flex-direction: column;
}

.menu-links > a {
    padding: 1rem 0;
    font-size: 1.2rem;
    color: #333;
    text-decoration: none;
    border-bottom: 1px solid #eee;
    transition: all 0.3s ease;
}

.menu-links > a:hover {
    color: #CD5C5C;
}

/* Taxonomy Section */
.taxonomy-section {
    margin-top: 2rem;
}

.taxonomy-section h3 {
    margin: 1.5rem 0 0.8rem 0;
    color: #555;
    font-size: 1.2rem;
}

.taxonomy-list {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    margin-bottom: 1.5rem;
}

.taxonomy-item {
    padding: 0.2rem 0.6rem;
    background: #f5f5f5;
    border-radius: 3px;
    font-size: 0.9rem;
    color: #555;
    text-decoration: none;
    transition: all 0.3s ease;
    border: 1px solid #555;
}

.taxonomy-item:hover {
    background: #CD5C5C;
    color: white;
}

/* Search Results */
.search-result-item {
    padding: 0.75rem;
    border-bottom: 1px solid #eee;
    transition: background 0.3s ease;
}

.search-result-item:hover {
    background-color: #f9f9f9;
}

.search-result-item a {
    color: #CD5C5C;
    text-decoration: none;
    font-weight: 500;
}

.search-tag {
    display: inline-block;
    margin-left: 0.5rem;
    padding: 0.2rem 0.5rem;
    background: #f5f5f5;
    border-radius: 12px;
    font-size: 0.8rem;
    color: #666;
}

@media (max-width: 1000px) {
    .slogan {
        display: none;
    }


/* Responsive */
@media (max-width: 768px) {
    .slogan {
        display: none;
    }
    
    .taxonomy-list {
        gap: 0.4rem;
    }
    
    .taxonomy-item {
        padding: 0.4rem 0.8rem;
        font-size: 0.85rem;
    }

      /* Hover effects for both */
  .fa, .fab, .fas {
    font-size: 14px !important;

  }

.social-icon {
    margin-left: 0.5rem !important;
    margin-right: 0.5rem !important;
    font-size: 28px;
    color: #6c6464;
    transition: all 0.3s ease;
}

}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Menu toggle functionality
    const menuToggle = document.getElementById('menuToggle');
    const menuClose = document.getElementById('menuClose');
    const fullscreenMenu = document.getElementById('fullscreenMenu');
    const burgerIcon = document.querySelector('.burger-icon');
    const burgerIconHover = document.querySelector('.burger-icon-hover');
    const navBar = document.querySelector('.nav-bar');

    function toggleMenu(isOpen) {
        if (isOpen) {
            fullscreenMenu.style.display = 'none';
            burgerIcon.style.display = 'block';
            burgerIconHover.style.display = 'none';
            navBar.classList.remove('menu-open');
        } else {
            fullscreenMenu.style.display = 'flex';
            burgerIcon.style.display = 'none';
            burgerIconHover.style.display = 'block';
            navBar.classList.add('menu-open');
        }
    }

    menuToggle.addEventListener('click', function() {
        const isOpen = fullscreenMenu.style.display === 'flex';
        toggleMenu(isOpen);
    });

    menuClose.addEventListener('click', function() {
        toggleMenu(true);
    });

    // Search functionality
    const searchInput = document.getElementById('postSearch');
    const searchResults = document.getElementById('searchResults');
    const searchIcon = document.getElementById('searchIcon');

    function updateSearchStyles() {
        if (searchInput.value || document.activeElement === searchInput) {
            searchInput.style.borderBottom = '2px solid #CD5C5C';
            searchIcon.style.color = '#CD5C5C';
        } else {
            searchInput.style.borderBottom = '1px solid #ddd';
            searchIcon.style.color = '#999';
        }
    }

    searchInput.addEventListener('focus', updateSearchStyles);
    searchInput.addEventListener('blur', updateSearchStyles);

    searchInput.addEventListener('input', function() {
        updateSearchStyles();
        const query = this.value.toLowerCase().trim();
        
        if (query.length < 2) {
            searchResults.innerHTML = '';
            return;
        }
        
        const isIdSearch = query.startsWith('#');
        const cleanQuery = isIdSearch ? query.substring(1) : query;
        let resultsHTML = '';
        let matchCount = 0;
        
        window.estudiosData.forEach(estudio => {
            if (isIdSearch) {
                if (estudio.id && estudio.id.toString().toLowerCase().includes(cleanQuery)) {
                    resultsHTML += createResultItem(estudio);
                    matchCount++;
                }
                return;
            }
            
            const matchesTitle = estudio.title.toLowerCase().includes(cleanQuery);
            const matchesBarrio = estudio.barrio && estudio.barrio.toString().toLowerCase().includes(cleanQuery);
            const matchesEstilo = estudio.estilo && estudio.estilo.toString().toLowerCase().includes(cleanQuery);
            const matchesId = estudio.id && estudio.id.toString().toLowerCase().includes(cleanQuery);
            
            if (matchesTitle || matchesBarrio || matchesEstilo || matchesId) {
                resultsHTML += createResultItem(estudio);
                matchCount++;
            }
        });

        searchResults.innerHTML = matchCount > 0 ? resultsHTML : 
            '<p style="padding: 0.5rem; color: #666;">No se encontraron resultados</p>';
    });

    function createResultItem(estudio) {
        return `
            <div class="search-result-item">
                <a href="${estudio.permalink}">${estudio.title}</a>
                ${estudio.id ? `<span class="search-tag">#${estudio.id}</span>` : ''}
                ${estudio.barrio ? `<span class="search-tag">${Array.isArray(estudio.barrio) ? estudio.barrio.join(', ') : estudio.barrio}</span>` : ''}
                ${estudio.estilo ? `<span class="search-tag">${Array.isArray(estudio.estilo) ? estudio.estilo.join(', ') : estudio.estilo}</span>` : ''}
            </div>
        `;
    }
});
</script>