<!-- layouts/partials/search.html -->
<div class="search-container" style="margin: 2rem auto; max-width: 600px; position: relative;">
    <i class="fa-solid fa-magnifying-glass" 
       style="position: absolute; left: 1rem; top: 50%; transform: translateY(-50%); color: #999;"></i>
    <input type="text" id="postSearch" placeholder="Buscar Estudios por Nombre, Categoria o #ID..." 
           style="width: 100%; padding: 0.75rem 0.75rem 0.75rem 2.5rem; border: 1px solid #ddd; border-radius: 4px;">
    <div id="searchResults" style="margin-top: 1rem;"></div>
</div>

<!-- Keep all the existing JavaScript and CSS from your previous search.html -->

<script>
document.addEventListener('DOMContentLoaded', function() {
    const searchInput = document.getElementById('postSearch');
    const searchResults = document.getElementById('searchResults');
    
    if (searchInput && searchResults) {
        searchInput.addEventListener('input', function() {
            const query = this.value.toLowerCase().trim();
            
            if (query.length < 2) {
                searchResults.innerHTML = '';
                return;
            }
            
            const posts = document.querySelectorAll('.post-item'); 
            let resultsHTML = '';
            let matchCount = 0;
            
            posts.forEach(post => {
                // Get the title in format "#ID - Title"
                const titleLink = post.querySelector('.post-title');
                const titleText = titleLink?.textContent.trim() || '';
                
                // Get taxonomy data
                const taxonomyText = post.querySelector('.post-taxonomy')?.textContent.trim() || '';
                
                // Combine all searchable text
                const fullText = (titleText + ' ' + taxonomyText).toLowerCase();
                
                if (fullText.includes(query)) {
                    const link = titleLink?.href || '#';
                    
                    resultsHTML += `
                        <div class="search-result-item" style="padding: 0.5rem; border-bottom: 1px solid #eee;">
                            <a href="${link}" style="color: inherit; text-decoration: none;">
                                ${titleText}
                            </a>
                        </div>
                    `;
                    matchCount++;
                }
            });
            
            if (matchCount > 0) {
                searchResults.innerHTML = resultsHTML;
            } else {
                searchResults.innerHTML = '<p style="padding: 0.5rem;">No se encontraron resultados</p>';
            }
        });
    }
});
</script>

<style>
.search-result-item:hover {
    background-color: #f5f5f5;
}
.search-result-item a {
    color: #CD5C5C !important;
}
</style>