{{ if .Site.Params.showMenu | default true }}
<!-- Begin Nav bar -->
<div class="container">
    <hr>
    <nav class="navbar" role="navigation" aria-label="main navigation">
        {{ $isHome := .Page.IsHome }}
        <a role="button" class="navbar-burger" data-target="navMenu" aria-label="menu" aria-expanded="false">
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
        </a>
        <div class="navbar-menu {{ if $isHome }}has-content-centered{{ end }}" id="navMenu">
            <!-- look for custom menu and include it -->
            {{ if .Site.Menus.main }}
            {{ range .Site.Menus.main }}
            {{ if .HasChildren }}
            <a class="navbar-item" href="{{ .URL }}">
                {{ .Pre }}
                {{ .Name }}
                {{ .Post }}
            </a>
            {{ range .Children }}
            <!-- TODO: style children different than parents-->
            <a class="navbar-item" href="{{ .URL }}">
                {{ .Pre }}
                {{ .Name }}
                {{ .Post }}
            </a>
            {{ end }}
            {{ else }}
            <a class="navbar-item" href="{{ .URL }}">hola
                {{ .Pre }}
                {{ .Name }}
                {{ .Post }}
            </a>
            {{ end }}
            {{ end }}
            {{ else }}
            <!-- use default menu -->
            {{ if not $isHome }}
            <a class="navbar-item" href="{{ "" | relLangURL }}">{{ i18n "nav_main" . }}</a>
            {{ end }}

            {{ with .Site.GetPage "/home" }}
            {{ $pages := .Resources.ByType "page" }}

            {{ with .Site.GetPage "/blog" }}
                {{ $pages = $pages | append . }}
            {{ end }}

            {{ with .Site.GetPage "/yoga" }}
                {{ if $isHome }}
                    <a class="navbar-item" href="#el-semillero">El Semillero del Yoga</a>
                {{ else }}
                    <a class="navbar-item" href="{{ printf "%s#yoga-section" ("/" | relLangURL) }}">Yoga101</a>
                {{ end }}
            {{ end }}

            {{ range sort $pages "Params.weight" }}
            {{ if ne .Name "contact.md" }}
            {{ if eq (os.Stat .File.Dir).Name "projects" }}
                <!-- Now for some cool projects -->
                {{ if $isHome }}
                <a class="navbar-item" href="{{ printf "#%s" ( .Title | urlize) | relLangURL }}">{{ .Title | markdownify }}</a>
                {{ else }}
                {{ $pageIsInProjects := eq $.Page.Section "projects"}}
                {{ if not (and $pageIsInProjects (eq $.Page.Kind "section")) }}
                  <a class="navbar-item" href="{{ .Permalink }}">
                  {{ if $pageIsInProjects }}
                  {{ i18n "nav_backToSection" . }}
                  {{ else }}
                  <!-- fix-224 -->
                  {{ .Title }}
                  <!-- end fix-224 -->
                  {{ end }}
                  </a>
                {{ end }}
                {{ end }}
            {{ else if eq (os.Stat .File.Dir).Name "blog" }}
                <!-- Let`s show some blog posts -->
                {{ if $isHome }}
                <a class="navbar-item" href="{{ printf "#%s" ( .Title | urlize) | relLangURL }}">{{ .Title | markdownify }}</a>
                {{ else }}
                {{ $pageIsInBlog := eq $.Page.Section "blog"}}
                {{ if not (and $pageIsInBlog (eq $.Page.Kind "section")) }}
                  <a class="navbar-item" href="{{ .Permalink }}">
                  {{ if $pageIsInBlog }}
                  {{ i18n "nav_backToSection" . }}
                  {{ else }}
                  {{ .Title | singularize}}
                  {{ end }}
                  </a>
                {{ end }}
                {{ end }}
            {{ else }}
            <a class="navbar-item" href="{{ if $isHome }}#{{ .File.TranslationBaseName }}{{ else }}{{ printf "#%s" (.File.TranslationBaseName | urlize) | relLangURL }}{{ end }}">{{ .Title | markdownify }}</a>
            {{ end }}
            {{ end }}
            {{ end }}
            {{ end }}

            {{ with .Site.GetPage "/home" }}
            {{ with .Resources.GetMatch "contact.md" }}
            <a class="navbar-item" href="{{ if $isHome }}#{{ .File.TranslationBaseName }}{{ else }}{{ printf "#%s" (.File.TranslationBaseName | urlize) | relLangURL }}{{ end }}">{{ .Title | markdownify }}</a>
            {{ end }}
            {{ end }}

            {{ range $.Site.Home.AllTranslations.ByWeight }}
            {{ if ne .Language.LanguageName $.Language.LanguageName }}
            <a class="navbar-item" href="{{ .Permalink }}">{{ .Language.LanguageName }}</a>
            {{ end }}
            {{ end }}

            {{ if and .Site.Params.showRSSButton }}
            <a class="navbar-item" href="{{ with .OutputFormats.Get "RSS" }}{{ .RelPermalink }}{{ end }}"><i class="fas fa-rss"></i></a>
            {{ end }}
            {{ end }}
        </div>
    </nav>
    <hr>
</div>
<!-- End Nav bar -->
{{ end }}


<script>
    // Nav burger animation
document.addEventListener('DOMContentLoaded', function () {
    // Get all "navbar-burger" elements
    var $navbarBurgers = Array.prototype.slice.call(document.querySelectorAll('.navbar-burger'), 0)
    // Check if there are any navbar burgers
    if ($navbarBurgers.length > 0) {
      // Add a click event on each of them
      $navbarBurgers.forEach(function ($el) {
        $el.addEventListener('click', function () {
          // Get the target from the "data-target" attribute
          var target = $el.dataset.target
          var $target = document.getElementById(target)
          // Toggle the class on both the "navbar-burger" and the "navbar-menu"
          $el.classList.toggle('is-active')
          $target.classList.toggle('is-active')
        })
      })
    }
  })
  
  // Modal closer
  $('.card').click(function () {
    $($(this).attr('data-target')).addClass('is-active')
    $('html').addClass('modal-open')
  })
  $('.modal-close').click(function () {
    $($(this).attr('data-target')).removeClass('is-active')
    $('html').removeClass('modal-open')
  })
  $(document).keypress(function (e) {
    if (e.which === 0) {
      $('.modal.is-active').removeClass('is-active')
      $('html').removeClass('modal-open')
    }
  })
</script>